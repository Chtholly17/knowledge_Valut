- 修改前的系统架构（第一张ppt）![[Pasted image 20221124222542.png]]
	 - AI-IP模块与SRAM存储单元共同挂在系统外设总线上，由CPU控制AI-IP进行参数以及图片信息的读取。
	 - 在复赛期间，我们发现系统外设总线是一条低速总线，该总线上的时钟工作频率很低，如果通过外设总线进行SRAM模块与AI-IP模块之间的通信，必然会导致AI模块在初始化参数和读取图片信息时消耗大量的时间，导致识别效率极大降低。同时，可能由于参考的材料版本较旧，我们确实没有在系统总线上找到可以用于地址映射的合法地址（转下一张PPT，展示地址映射）。![[Pasted image 20221124223506.png]]由于时间紧迫，我们不想冒地址不合法的风险对系统结构进行大改，但为了提升系统的计算速度，我们对SOC系统进行了如下的修改（转下一张ppt）
 - 修改后的系统架构![[Pasted image 20221124223141.png]]
	 - 我们增添了SRAM与AIIP模块之间的单独的数据通路，二者直接进行数据传输。同时SRAM模块不再与外设总线连接，AIIP模块依然挂载在外设总线上，与CPU之间的交流仅有简单的控制信号（包括开始识别的命令、识别结束的信号、识别结果和识别结果合法标志），低速的外设总线也足以满足上述的简单信号传输，也让我们的SOC系统逻辑变得更加的精简。同时，我们对AI-IP与SRAM模块的控制信号进行了跨时钟域信号处理，单独拉高了AI模块的工作频率，保证AI-IP的工作频率，识别速度不会收到影响。
	 - 系统新的工作逻辑为：上电后，AI-IP立刻进入就绪状态，等待CPU发出的Start信号，收到Start信号之后，AI-IP进入工作状态，通过专有数据通路从Sram中读取参数与图片信息，进行卷积运算并进行结果预测。识别结束后，会产生卷积结束信号、结果合法标志信号和结果数据。CPU接受到卷积结束信号之后检查结果合法信号，若结果合法则读取结果，否则会发出错误信息。（转下一张ppt）
 - SOC系统源码
	 - 定义了AI-IP模块结构以及其中的寄存器，并且定义了它的地址映射，在AIIP.c中定义了对各个寄存器的读写函数。
