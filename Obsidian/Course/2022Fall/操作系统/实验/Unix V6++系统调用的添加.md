## 基本流程
- 在systemCall中分别声明与定义对应的内核函数
	- 需要注意，内核函数返回值都为0，需要返回给调用者的内容应当存放在EAX寄存器中
![[截屏2022-11-16 21.21.49.png]]
- 在系统调用表中找到一个空的表项并且绑定刚才定义的函数，第一个参数表示该系统调用需要接收的参数数目![[截屏2022-11-16 21.22.17.png]]
- 写钩子函数，功能为传入所需要的参数，并且接收返回值，放在sys.c中![[截屏2022-11-16 21.26.47.png]]
## 需要返回多个值的情况
- 在钩子函数中使用malloc申请空间，并且传入指针即可![[屏幕截图 2022-11-17 005304.png]]
## 其他
- MemoryDescriptor中存放的数据段、代码段地址均为**逻辑地址**，而text结构中存放的代码段起始地址和process结构存放的ppda区起始地址均为**物理地址**
