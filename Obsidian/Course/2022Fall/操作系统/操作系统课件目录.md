# 绪论
- 计算机中的资源：1
- OS：1
	- 单道与多道：2
		- 多道系统的实现：3
		- 实现多道程序的关键技术：4
		- 多道系统的特征：6
	- OS的工作模块：6
# Unix系统样貌
- 多用户Unix系统的硬件与软件：9
- Unix系统访问权限：16
	- 用户：17
		- 会话(Session)：18
	- 进程：21
		- 进程控制块(PCB)：24
	- 文件：25
		- Linux文件树：26
		- 文件控制块(FCB)：29
			- 访问权限的确定：30
		- 进程对文件的访问：34
			- open：36
			- read/write：37
			- Iseek：38
			- close：39
# 调度
## 进程状态转换和调度理论
- 进程状态切换：41
	- 可剥夺与不可剥夺：42
		- 不可剥夺的系统：43
		- 可剥夺的系统：43
	- 进程的基本调度状态：45
		- 进程状态转换（可剥夺的系统）：46
		- 进程状态转换（不可剥夺系统）：47
	- 新建与终止：48
	- 挂起和激活：49
	- 进程的组织：51
	- 进程队列：52
		- 单CPU系统的进程队列：52
		- 多CPU系统的进程队列：54
- 进程调度理论：57
	- 研究主题：58
	- 性能指标：59
		- 周转时间（带权周转时间）：59
		- 响应时间：60
		- 截止时间：61
		- 吞吐量：62
	- 抢占式与非抢占式调度：65
		- 使用的场合：69
	- 调度算法：70
		- 不可剥夺的调度系统：72
			- FIFS和SJF：72
				- 评价：76
			- 高优先权调度算法：78
				- 基于动态优先权的高优先度调度算法：79
			- 工程上实用的调度算法：80
				- cpu Bound 和 IO Bound：81
				- 交互型作业和批处理作业：82
				- 时间片轮转：83
					- 特性：85
				- 多级反馈队列的调度算法：89
					- 高级调度和低级调度：94
# 存储管理
## 虚拟存储器基本理论
* 程序运行的局部性原理：308
	* 传统存储方式：309
	* 改善的思路：309
* 虚拟存储器：310
* 请求调页：311
* 缺页（page fault）：312
* 页面置换：314
	* 固定分配局部置换：314
	* 可变分配局部置换：314
	* 可变分配全局置换：315
* 虚拟存储器使用的页表项（PTE）：316
* 请求调页虚拟存储器的地址映射：317
* 页面置换算法：323
	* 最优替换算法（OPT）：324
	* 先进先出页面置换算法（FIFO）：325
		* 性能：326
		* Belady异常：327
	* LRU与FRU替换算法：329
	* Clock替换算法（NRU）：330
		* 改进算法（优先淘汰干净页面）：333
	* 随机替换算法：336
# 进程
## Unix V6++进程的表示和运行
- Unix V6++进程的表示：100
	- 程序的逻辑段（内容和实际的长度）：102
	- 程序的逻辑段（内容和对齐后的长度）：103
	- 进程图像用户区：103
	- 进程图像拓展：105
		- 栈：105
		- 堆：106
		- OOM：107
	- 可执行文件：108
	- Unix V6++进程图像：109
		- 进程的图像分配的存储空间：110
		- 初始化：111
		- 进程图像(v1)：112
		- 多进程共享代码段：113
		- Unix系统的物理内存：114
## CPU执行程序的过程
- 内存寻址：118
	- 存储程序思想：120
	- 变量的物理地址：123
	- 地址映射：124
	- 内存保护：125
	- MMU实现地址映射和内存保护：128
- 程序的执行、子程序的调用和返回：132
	- 栈空间的使用：133
		- 栈帧格式：134
		- 通用寄存器的用途：137
		- 子函数调用、返回过程的指令：138
- 地址映射、内存保护和Unix V6++的内存管理：152
	- 预备：153
		- 用户态图像和核心态图像：153
		- 进程的虚空间：154
		- 内存描述符：155
	- 用户空间和核心空间的地址映射关系：156
	- 页式存储管理：159
		- 虚空间分页：159
		- 实空间分页：160
		- 页表：161
		- PTE的内核定义：162
		- 纯页式管理的地址映射和内存保护：165
		- 优点：166
		- 缺点：167
		- IA-32的二级页表：169
			- 二级页表的地址映射和内存保护：177
			- 4个系统页框：179
			- 相对表：181
			- 进程切换时的页表刷新：182
			- 相关代码：188
	- 进程存储资源的分配：193
	- Unix V6++空闲内存管理：196
		- 可变分区管理策略：201
		- 回收：202
# 存储器管理理论
## 基本理论
- 空间管理：237
	- 空闲存储空间的管理：238
- 地址映射和内存保护：241
	- 逻辑地址和物理地址：241
	- 重定位（地址映射）：243
	- 内存保护：244
	- MMU单元：246
		- 没有MMU的计算机系统：248
		- 支持动态重定位的MMU：249
			- 基址、限长寄存器：249
			- 段寄存器：250
- 内存扩充：254
	- 覆盖：255
	- 交换：256
	- 虚拟存储器：258
- 提高内存访存速度(cache)：259
	- cache：260
	- 指令缓存和数据缓存：262
		- 指令、数据的访存（命中和不命中的读与写）：262
	- TLB：268
- 连续存储管理方式：272
	- 单一连续分配：273
	- 固定分区分配：274
	- 可变分区分配：276
	- 分配算法：
		- 首次适应：211
		- 循环首次适应：212
		- 最佳适应：213
		- 最差适应：214
	- 缺陷和解决问题的思路：284
- 离散存储管理方式：285
	- 页式存储管理基本思想：286
	- 分页系统的地址变换过程：288
	- 空间内存管理(位视图)：290
	- 分页系统的优点：291
	- 分页系统带来的问题：300
	- 用快表(TLB)提高地址映射速度：301
## 虚拟存储器基本理论
- 程序运行的局部性原理：307
- 调页机制和页面置换机制：309
- 虚拟存储器：310
- 请求调页：311
- 缺页：312
- 页面置换：313
	- 固定分配局部置换：314
	- 可变分配局部置换：314
	- 可变分配全局置换：315
- 虚拟存储器的PTE：316
- 请求调页时虚拟存储器的地址映射：317
- 页面置换算法：323
	- 最优替换算法(OPT)：324
	- 先进先出页面置换算法(FIFO)：325
		- Belady异常：327
	- 最久未使用(LRU)：329
	- Clock：330
		- 改进型：333
- 工作集和驻留集：338
- 抖动：339
# 中断
## 中断机制
* CPU执行程序和响应中断过程：344
* 内核中中断返回前的调度：349
* 总结：351
## Unix V6++的中断系统
* 模式切换：353
* IA-32芯片：354
	* 段寄存器1：354
	* 段描述符1：356
- 模式切换：390
	* 执行状态与模式切换：390
	* 现运行进程陷入内核的原因：392
		* 相应外设中断：393
		* 响应时钟中断：394
		* 应用程序执行系统调用：395
			* 为什么读文件要系统调用：396
		* 异常：397
	* 总结：397
* Unix V6的段：400
* 段寄存器2：401
	* CPU芯片具有6个段寄存器：401
	* 段选择子：402
	* 用户态与核心态中段寄存器的值：402
* 中断入口程序的地址：404
* 中断描述符表和寄存器：406
* 中断门：407
* 中断描述符的初始化：408
* 中断响应过程：412
	* 每条指令之后的中断检查：412
	* CPU硬件响应中断：413
	* 中断入口程序保护现场、模式转换：414
	* 调用中断处理程序：415
	* 恢复中断前状态：417
* 内部中断和外部中断：420
* 中断入口程序的结构：423
* CPU堆中断的响应：425
	* EFLAGS中IF位：425
	* 外部中断处理流程：426
	* 内部中断处理流程：428
* 中断处理细节：429
	* CPU用户态运行并响应外部中断：430
		* 中断隐指令-硬件响应中断：431
		* 中断入口函数入口指令：433
		* 中断入口程序-SaveContext()：434
		- 中断入口程序-SwitchToKernel()：436
		- 中断入口程序-CallHandler()：437
		- 中断处理程序执行：438
		- 返回中断入口程序：440
		- 中断入口程序-RestoreContext()：441
		- 中断入口程序-Leave()和InterruptReturn()：442
	- CPU核心态运行并相应外部中断：443
	- 中断发生时、发生后的核心栈：444
## 系统调用和Swtch
## 进程调度子系统、时间管理和交换子系统
- swtch(), sleep(), wakeup()：494
	- swtch：495
	- sleep：498
	- wakeUpAll：500
- Unix V6++进程调度子系统：501
	- 数据结构：502
		- 进程控制块与调度：503
	- 可剥夺调度的实现：504
	- 系统调用与进程调度：510
		- Unix V6进程优先数：511
	- 时间片轮转：514
- 时间管理：516
	- 时钟（三种时钟）：518
		- 墙上时间：519
		- 时钟的用途：520
	- 时钟中断处理程序要做的工作：521
	- Time对象：522
	- 时钟中断处理：523
		- 整数秒：524
		- 开中断之后：526
	- 补充与总结：527